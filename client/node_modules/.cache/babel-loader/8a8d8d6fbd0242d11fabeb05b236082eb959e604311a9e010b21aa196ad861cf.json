{"ast":null,"code":"//import { baseUrl } from \"./constants\";\n\nconst baseUrl = process.env.NODE_ENV === \"production\" ? \"https://api.jendoc-wtwr.students.nomoredomainssbs.ru\" : \"http://localhost:3001\";\nfunction request(url, options) {\n  return fetch(url, options).then(handleServerResponse);\n}\nexport const handleServerResponse = res => {\n  if (res.ok) {\n    return res.json();\n  } else {\n    return Promise.reject(`Error: ${res.status}`);\n  }\n};\nexport const getItems = () => {\n  return request(`${baseUrl}/items`, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Access-Control-Allow-Origin\": \"any\",\n      authorization: `Bearer ${localStorage.getItem(\"token\")}`\n    }\n  });\n};\nexport const addItem = (name, imageUrl, weather) => {\n  return request(`${baseUrl}/items`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Access-Control-Allow-Origin\": \"any\",\n      authorization: `Bearer ${localStorage.getItem(\"token\")}`\n    },\n    body: JSON.stringify({\n      name,\n      imageUrl,\n      weather\n    })\n  });\n};\nexport const deleteItem = _id => {\n  return request(`${baseUrl}/items/${_id}`, {\n    method: \"DELETE\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Access-Control-Allow-Origin\": \"any\",\n      authorization: `Bearer ${localStorage.getItem(\"token\")}`\n    }\n  });\n};\nexport const addCardLike = _id => {\n  return request(`${baseUrl}/items/${_id}/likes`, {\n    method: \"PUT\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      authorization: `Bearer ${localStorage.getItem(\"token\")}`\n    }\n  });\n};\nexport const removeCardLike = _id => {\n  return request(`${baseUrl}/items/${_id}/likes`, {\n    method: \"DELETE\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      authorization: `Bearer ${localStorage.getItem(\"token\")}`\n    }\n  });\n};","map":{"version":3,"names":["baseUrl","process","env","NODE_ENV","request","url","options","fetch","then","handleServerResponse","res","ok","json","Promise","reject","status","getItems","method","headers","authorization","localStorage","getItem","addItem","name","imageUrl","weather","body","JSON","stringify","deleteItem","_id","addCardLike","removeCardLike"],"sources":["/Users/soysauce/Desktop/WTWR/client/se_project_react/src/utils/api.js"],"sourcesContent":["//import { baseUrl } from \"./constants\";\n\nconst baseUrl =\n  process.env.NODE_ENV === \"production\"\n    ? \"https://api.jendoc-wtwr.students.nomoredomainssbs.ru\"\n    : \"http://localhost:3001\";\n\nfunction request(url, options) {\n  return fetch(url, options).then(handleServerResponse);\n}\n\nexport const handleServerResponse = (res) => {\n  if (res.ok) {\n    return res.json();\n  } else {\n    return Promise.reject(`Error: ${res.status}`);\n  }\n};\n\nexport const getItems = () => {\n  return request(`${baseUrl}/items`, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Access-Control-Allow-Origin\": \"any\",\n      authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n    },\n  });\n};\n\nexport const addItem = (name, imageUrl, weather) => {\n  return request(`${baseUrl}/items`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Access-Control-Allow-Origin\": \"any\",\n      authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n    },\n    body: JSON.stringify({\n      name,\n      imageUrl,\n      weather,\n    }),\n  });\n};\n\nexport const deleteItem = (_id) => {\n  return request(`${baseUrl}/items/${_id}`, {\n    method: \"DELETE\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Access-Control-Allow-Origin\": \"any\",\n      authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n    },\n  });\n};\n\nexport const addCardLike = (_id) => {\n  return request(`${baseUrl}/items/${_id}/likes`, {\n    method: \"PUT\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n    },\n  });\n};\n\nexport const removeCardLike = (_id) => {\n  return request(`${baseUrl}/items/${_id}/likes`, {\n    method: \"DELETE\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n    },\n  });\n};\n"],"mappings":"AAAA;;AAEA,MAAMA,OAAO,GACXC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,GACjC,sDAAsD,GACtD,uBAAuB;AAE7B,SAASC,OAAO,CAACC,GAAG,EAAEC,OAAO,EAAE;EAC7B,OAAOC,KAAK,CAACF,GAAG,EAAEC,OAAO,CAAC,CAACE,IAAI,CAACC,oBAAoB,CAAC;AACvD;AAEA,OAAO,MAAMA,oBAAoB,GAAIC,GAAG,IAAK;EAC3C,IAAIA,GAAG,CAACC,EAAE,EAAE;IACV,OAAOD,GAAG,CAACE,IAAI,EAAE;EACnB,CAAC,MAAM;IACL,OAAOC,OAAO,CAACC,MAAM,CAAE,UAASJ,GAAG,CAACK,MAAO,EAAC,CAAC;EAC/C;AACF,CAAC;AAED,OAAO,MAAMC,QAAQ,GAAG,MAAM;EAC5B,OAAOZ,OAAO,CAAE,GAAEJ,OAAQ,QAAO,EAAE;IACjCiB,MAAM,EAAE,KAAK;IACbC,OAAO,EAAE;MACP,cAAc,EAAE,kBAAkB;MAClC,6BAA6B,EAAE,KAAK;MACpCC,aAAa,EAAG,UAASC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAE;IACzD;EACF,CAAC,CAAC;AACJ,CAAC;AAED,OAAO,MAAMC,OAAO,GAAG,CAACC,IAAI,EAAEC,QAAQ,EAAEC,OAAO,KAAK;EAClD,OAAOrB,OAAO,CAAE,GAAEJ,OAAQ,QAAO,EAAE;IACjCiB,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACP,cAAc,EAAE,kBAAkB;MAClC,6BAA6B,EAAE,KAAK;MACpCC,aAAa,EAAG,UAASC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAE;IACzD,CAAC;IACDK,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MACnBL,IAAI;MACJC,QAAQ;MACRC;IACF,CAAC;EACH,CAAC,CAAC;AACJ,CAAC;AAED,OAAO,MAAMI,UAAU,GAAIC,GAAG,IAAK;EACjC,OAAO1B,OAAO,CAAE,GAAEJ,OAAQ,UAAS8B,GAAI,EAAC,EAAE;IACxCb,MAAM,EAAE,QAAQ;IAChBC,OAAO,EAAE;MACP,cAAc,EAAE,kBAAkB;MAClC,6BAA6B,EAAE,KAAK;MACpCC,aAAa,EAAG,UAASC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAE;IACzD;EACF,CAAC,CAAC;AACJ,CAAC;AAED,OAAO,MAAMU,WAAW,GAAID,GAAG,IAAK;EAClC,OAAO1B,OAAO,CAAE,GAAEJ,OAAQ,UAAS8B,GAAI,QAAO,EAAE;IAC9Cb,MAAM,EAAE,KAAK;IACbC,OAAO,EAAE;MACP,cAAc,EAAE,kBAAkB;MAClCC,aAAa,EAAG,UAASC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAE;IACzD;EACF,CAAC,CAAC;AACJ,CAAC;AAED,OAAO,MAAMW,cAAc,GAAIF,GAAG,IAAK;EACrC,OAAO1B,OAAO,CAAE,GAAEJ,OAAQ,UAAS8B,GAAI,QAAO,EAAE;IAC9Cb,MAAM,EAAE,QAAQ;IAChBC,OAAO,EAAE;MACP,cAAc,EAAE,kBAAkB;MAClCC,aAAa,EAAG,UAASC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAE;IACzD;EACF,CAAC,CAAC;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}